!function(a){var n,e,o,t,l,s;l=a(".main-navigation"),s=a("<button />",{class:"dropdown-toggle","aria-expanded":!1}).append(villa_estate_l10n.icon).append(a("<span />",{class:"screen-reader-text",text:villa_estate_l10n.expand})),l.find(".menu-item-has-children > a, .page_item_has_children > a").after(s),l.find(".current-menu-ancestor > button").addClass("toggled-on").attr("aria-expanded","true").find(".screen-reader-text").text(villa_estate_l10n.collapse),l.find(".current-menu-ancestor > .sub-menu").addClass("toggled-on"),l.find(".dropdown-toggle").click(function(n){var e=a(this),o=e.find(".screen-reader-text");n.preventDefault(),e.toggleClass("toggled-on"),e.next(".children, .sub-menu").toggleClass("toggled-on"),e.attr("aria-expanded","false"===e.attr("aria-expanded")?"true":"false"),o.text(o.text()===villa_estate_l10n.expand?villa_estate_l10n.collapse:villa_estate_l10n.expand)}),n=a("#masthead"),e=n.find(".menu-toggle"),o=n.find(".main-navigation"),t=n.find(".main-navigation > div > ul"),e.length&&(e.attr("aria-expanded","false"),e.on("click.villa_estate",function(){o.toggleClass("toggled-on"),a(this).attr("aria-expanded",o.hasClass("toggled-on"))})),function(){function n(){"none"===a(".menu-toggle").css("display")?(a(document.body).on("touchstart.villa_estate",function(n){a(n.target).closest(".main-navigation li").length||a(".main-navigation li").removeClass("focus")}),t.find(".menu-item-has-children > a, .page_item_has_children > a").on("touchstart.villa_estate",function(n){var e=a(this).parent("li");e.hasClass("focus")||(n.preventDefault(),e.toggleClass("focus"),e.siblings(".focus").removeClass("focus"))})):t.find(".menu-item-has-children > a, .page_item_has_children > a").unbind("touchstart.villa_estate")}t.length&&t.children().length&&("ontouchstart"in window&&(a(window).on("resize.villa_estate",n),n()),t.find("a").on("focus.villa_estate blur.villa_estate",function(){a(this).parents(".menu-item, .page_item").toggleClass("focus")}))}()}(jQuery);